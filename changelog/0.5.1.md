# Nexus 0.5.1 - September 19, 2025

## Summary
This release enhances the telemetry capabilities with advanced OTLP (OpenTelemetry Protocol) exporter configuration, adds support for OpenAI Codex CLI for the Anthropic protocl, improves logging with UTC timestamps, and includes dependency updates for improved security and performance.

## New Features

### Enhanced OTLP Telemetry Support
**User Impact:** Users can now configure OTLP exporters with TLS support for secure telemetry data transmission and custom headers for authentication with observability platforms.

**Technical Details:**
- Added TLS configuration support for gRPC OTLP exporters
- Implemented custom header support for both gRPC and HTTP OTLP protocols
- Files modified: `crates/config/src/telemetry/exporters.rs`, `crates/telemetry/src/metadata.rs`
- New configuration options:
  - `telemetry.exporters.otlp.grpc.tls.domain_name` - SNI domain for TLS verification
  - `telemetry.exporters.otlp.grpc.tls.ca_certificate` - Custom CA certificate path
  - `telemetry.exporters.otlp.grpc.tls.client_certificate` - Client certificate for mTLS
  - `telemetry.exporters.otlp.grpc.tls.client_key` - Client private key for mTLS
  - `telemetry.exporters.otlp.grpc.headers` - Custom gRPC metadata headers
  - `telemetry.exporters.otlp.http.headers` - Custom HTTP headers

### OpenAI Codex CLI Support via Anthropic Provider
**User Impact:** Users can now use the OpenAI Codex CLI with Nexus through the Anthropic provider. The provider fully supports OpenAI-compatible formats including function calling and tool usage, enabling seamless integration with the Codex CLI and other OpenAI-compatible tools.

**Technical Details:**
- Added support for function calling and tool use in Anthropic provider
- Files modified: `crates/llm/src/provider/anthropic/input.rs`, `crates/llm/src/messages/unified.rs`

## Enhancements/Improvements

### Improved Logging with UTC Timestamps
**User Impact:** All log timestamps are now consistently formatted in UTC with microsecond precision, making it easier to correlate logs across distributed systems and time zones.

**Technical Details:**
- Replaced local timezone logging with UTC timestamps
- Added microsecond precision to timestamps (format: `YYYY-MM-DDTHH:MM:SS.ffffffZ`)
- Files modified: `crates/server/src/logger.rs`, `crates/telemetry/src/logs.rs`
- Removed legacy logger implementation from `nexus/src/logger.rs`
- Improved terminal detection for color output control

## Infrastructure/DevOps Changes

### Dependency Updates
**User Impact:** Improved security and performance through updated dependencies.

**Technical Details:**
- Updated `anyhow` from 1.0.99 to 1.0.100 - Enhanced error handling
- Updated `rustls` from 0.23.31 to 0.23.32 - Security improvements for TLS
- Updated various transitive dependencies in `Cargo.lock`

## Deployment Notes

### Configuration Changes
For users upgrading from 0.5.0, the following new configuration options are available but not required:

```toml
# OTLP TLS Configuration (optional)
[telemetry.exporters.otlp.grpc.tls]
domain_name = "telemetry.example.com"
ca_certificate = "/path/to/ca.pem"
client_certificate = "/path/to/client.pem"
client_key = "/path/to/client.key"

# OTLP Headers (optional)
[telemetry.exporters.otlp.grpc.headers]
authorization = "Bearer your-token"
x-custom-header = "value"
```

### Breaking Changes
None - this release maintains full backward compatibility with 0.5.0.

### Migration Steps
No migration required. The new features are opt-in and existing configurations will continue to work without modification.

### Performance Considerations
- TLS configuration for OTLP may add slight latency to telemetry exports but improves security
