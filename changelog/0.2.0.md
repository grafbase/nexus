# Nexus 0.2.0 - August 11, 2025

## Summary

This major release introduces LLM (Large Language Model) provider support, transforming Nexus from an MCP router into a full-featured AI router capable of aggregating both MCP servers and LLM providers. Key highlights include support for OpenAI, Anthropic, and Google Vertex AI with streaming capabilities, "bring your own key" functionality for secure API key management, enhanced MCP tool discovery with structured output schemas, and improved stability with better error handling during server startup. The release also includes significant dependency updates and infrastructure improvements.

## New Features

### LLM Provider Support
**User Impact:** Nexus now functions as a unified gateway for multiple LLM providers, allowing you to route requests to OpenAI, Anthropic, or Google Gemini through a single interface.

**Technical Details:**
- Implemented provider trait abstraction for clean provider integration
- Added support for OpenAI, Anthropic, and Google Vertex AI providers
- Full configuration support via TOML for LLM routing
- Files added: `crates/llm/` module with provider implementations
- Configuration: New `[llm]` section in config with `enabled` flag and `providers` map

### Bring Your Own Key (BYOK)
**User Impact:** Enhanced security by allowing users to provide their own API keys for LLM providers at request time, rather than storing them in server configuration.

**Technical Details:**
- API keys can be passed via request headers or configuration
- Support for per-request token forwarding
- Secure token handling with proper masking in logs
- Files modified: `crates/llm/src/provider/token.rs`, `crates/llm/src/request.rs`
- Test coverage: Comprehensive integration tests in `crates/integration-tests/tests/llm/forward_token.rs`

### MCP Search Tool Output Schema
**User Impact:** The MCP search tool now provides a JSON Schema definition of its output format, making it more compliant with the MCP specification and helping LLMs better understand response structures.

### Docker Stable Tag
**User Impact:** A new `stable` Docker tag that always points to the latest release, making it easier to deploy production-ready versions.

### Version Display on Startup
**User Impact:** Nexus now prints its version number (e.g., "Nexus X.Y.Z") when starting up, making it easier to verify which version is running.

## Enhancements

### Improved Configuration Validation
**User Impact:** Clearer separation between feature enablement and server configuration, preventing confusion when features are enabled but no servers are configured.

## Bug Fixes

### Fixed Server Startup Crash on MCP Downstream Failure
**Issue:** Server would crash during startup if an MCP downstream server failed to initialize.
**Resolution:** Server now logs warnings for failed MCP servers but continues startup, ensuring other services remain available.
**Technical:** Improved error handling in MCP service initialization with graceful degradation.

## Infrastructure & Dependencies

### Major Dependency Updates
- **RMCP**: Updated from 0.3.x to 0.5.0 (MCP protocol implementation)
- **Redis**: Updated to 0.32.5
- **Governor**: Updated to 0.10.1 (rate limiting)
- **UUID**: Updated to 1.18.0
- **Libc**: Updated to 0.2.175
- **Ctor**: Updated to 0.5.0
- **Clap**: Updated to 4.5.43 (CLI parsing)
- **Toml**: Updated to 0.9.5

### CI/CD Improvements
- Updated `taiki-e/install-action` to v2.58.9
- Updated `actions/download-artifact` to v5
- Updated Redis Docker image to v8
- Updated Rust Docker image to v1.89

## Deployment Notes

### Breaking Changes
- None identified in this release

### Migration Steps
1. If using LLM features, add the new `[llm]` configuration section to your TOML config
2. For BYOK functionality, update client code to pass API keys via request headers
3. Update Docker deployments to use the new `stable` tag for production environments

### Configuration Example
```toml
[llm]
enabled = true

[llm.providers.openai]
base_url = "https://api.openai.com"
# API key can be provided here or via request headers

[mcp]
enabled = true
enable_structured_content = true  # New option for structured search responses
```
