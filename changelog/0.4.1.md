# Nexus 0.4.1 - September 10, 2025

## Summary

This release introduces OpenTelemetry logs export capability, enabling Nexus to send application logs to OpenTelemetry collectors with automatic trace correlation. This enhancement completes the observability trinity (metrics, traces, and logs) for system monitoring and debugging.

## New Features

### OpenTelemetry Logs Export

**User Impact:** Nexus can now export all application logs to OpenTelemetry-compatible collectors, providing centralized log management with automatic correlation to distributed traces. This enables debugging workflows where logs can be filtered by trace ID to see all logs related to a specific request across the entire system.

**Technical Details:**
- Implementation: New `OtelLogsAppender` integrates with logforth logging framework to capture and export logs
- Files added: `crates/telemetry/src/logs.rs` (core logs implementation)
- Files modified: `crates/config/src/telemetry.rs`, `crates/server/src/logger.rs`, `nexus/src/logger.rs`
- Configuration: Logs can use global OTLP exporters or have dedicated endpoints
- Features:
  - Automatic trace and span ID correlation for distributed debugging
  - Log severity levels mapped from Rust log levels (ERROR, WARN, INFO, DEBUG, TRACE)
  - Source code location attributes (file, line number, module path)
  - Support for both gRPC and HTTP OTLP protocols
  - Batched export with configurable flush intervals
- Performance: Zero overhead when logs export is disabled

## Infrastructure Changes

### Enhanced Telemetry Configuration

**Configuration Flexibility:** The telemetry system now supports signal-specific (metrics, traces, logs) exporter configurations, allowing each telemetry type to use different endpoints or protocols while maintaining backward compatibility with global configuration.

## Deployment Notes

### Configuration

To enable logs export, add the following to your `nexus.toml`:

```toml
# Option 1: Use global OTLP exporter for all telemetry signals
[telemetry.exporters.otlp]
enabled = true
endpoint = "http://collector:4317"

# Option 2: Configure a separate endpoint specifically for logs
[telemetry.logs.exporters.otlp]
enabled = true
endpoint = "http://logs-collector:4317"
protocol = "grpc"  # or "http"
```

### Compatibility

- Fully backward compatible - logs export is disabled by default
- No breaking changes to existing configuration
- Works with any OpenTelemetry-compatible collector (Grafana Tempo, Jaeger, etc.)

### Performance Considerations

- Logs are batched and exported asynchronously to minimize impact on request latency
- When disabled, the logs export feature has zero overhead
- OpenTelemetry's internal logs are automatically filtered to prevent log recursion
